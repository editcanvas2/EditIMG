<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Add Watermark to Image - EditIMG</title>
  <meta name="description" content="Add a custom text watermark to your images for free. Control the text, color, size, opacity, and rotation. Protect your photos online.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body { font-family: 'Inter', sans-serif; }
    .dropzone-highlight { border-color: #10b981; background-color: rgba(16, 185, 129, 0.05); }
    #live-canvas { max-width: 100%; max-height: 500px; }
    input[type=range]::-webkit-slider-thumb { appearance: none; width: 20px; height: 20px; background: #10b981; border-radius: 50%; cursor: pointer; }
    .accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out; }
    .accordion.active .accordion-content { max-height: 500px; }
    .accordion.active .accordion-toggle { transform: rotate(180deg); }
  </style>
</head>
<body class="bg-slate-50 text-gray-800">
  <div class="min-h-screen flex flex-col">
    <header class="bg-white/80 shadow-sm sticky top-0 z-50 backdrop-blur-lg">
      <div class="container mx-auto px-4">
        <div class="flex justify-between items-center py-4">
          <a href="index.html" class="flex items-center space-x-3">
            <i class="fas fa-images text-green-500 text-3xl"></i>
            <h1 class="text-2xl md:text-3xl font-bold text-gray-800">EditIMG</h1>
          </a>
          <a href="index.html" class="text-gray-600 hover:text-green-500 font-medium">
            <i class="fas fa-arrow-left mr-2"></i>Back to All Tools
          </a>
        </div>
      </div>
    </header>

    <main class="flex-grow container mx-auto px-4 py-8">
        <div class="max-w-5xl mx-auto">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold mb-4">Watermark Image Tool</h2>
                <p class="text-gray-600 max-w-2xl mx-auto">Protect your images by adding a custom text watermark.</p>
            </div>

            <div id="tool-root"></div>

            <section class="mt-16 bg-white p-8 rounded-2xl shadow-md border">
              <h3 class="text-2xl font-bold text-center mb-8">How to Add a Watermark</h3>
              <ol class="list-decimal list-inside space-y-4 max-w-2xl mx-auto text-gray-700">
                <li><strong>Upload Your Image:</strong> Drop an image file into the upload area or select it from your device.</li>
                <li><strong>Customize Your Watermark:</strong> Use the options on the left to:
                    <ul class="list-disc list-inside ml-6 mt-2">
                        <li>Change the <strong>Watermark Text</strong>.</li>
                        <li>Pick a new <strong>Color</strong>.</li>
                        <li>Adjust the <strong>Font Size</strong>, <strong>Opacity</strong>, and <strong>Rotation</strong> using the sliders.</li>
                    </ul>
                </li>
                <li><strong>Preview Live:</strong> Your changes will appear instantly on the image preview to the right.</li>
                <li><strong>Download:</strong> When your watermark looks perfect, click "Download Image" to save the final result.</li>
              </ol>
            </section>

            <section class="pt-16 max-w-4xl mx-auto">
              <h2 class="text-3xl font-bold text-center mb-8">Watermarking FAQ</h2>
              <div class="space-y-4 bg-white p-8 rounded-2xl shadow-lg border">
                <div class="accordion border-b pb-4">
                  <button class="w-full flex justify-between items-center text-left font-semibold py-2 accordion-btn">
                    <span>Can I add an image or logo as a watermark?</span>
                    <i class="fas fa-chevron-down accordion-toggle text-green-500"></i>
                  </button>
                  <div class="accordion-content mt-2 text-gray-600">
                    <p>Currently, our tool only supports text-based watermarks. The ability to add a logo or another image as a watermark is a popular request that we are considering for a future update.</p>
                  </div>
                </div>
                <div class="accordion">
                  <button class="w-full flex justify-between items-center text-left font-semibold py-2 accordion-btn">
                    <span>Can I move the watermark to a different position?</span>
                    <i class="fas fa-chevron-down accordion-toggle text-green-500"></i>
                  </button>
                  <div class="accordion-content mt-2 text-gray-600">
                    <p>This version of the tool places the watermark in the center of the image. We plan to add functionality to drag the watermark to any position, such as a corner or along the edge, in a future release.</p>
                  </div>
                </div>
              </div>
            </section>
        </div>
    </main>

    <footer class="bg-white py-6 border-t border-gray-200 mt-20">
      <div class="container mx-auto px-4 text-center">
        <p class="text-gray-600">© 2025 EditIMG. All rights reserved.</p>
      </div>
    </footer>
  </div>

  <template id="dropzone-template"><div class="max-w-xl mx-auto"><div id="dropzone" class="border-2 border-dashed border-gray-300 rounded-xl p-8 text-center cursor-pointer hover:border-green-500 hover:bg-green-50"><div class="flex flex-col items-center justify-center space-y-4"><i class="fas fa-cloud-upload-alt text-4xl text-green-500"></i><h3 class="text-xl font-semibold">Drop your image here</h3><p class="text-gray-500">or click to select a file</p><input type="file" id="fileInput" class="hidden" accept="image/*"><button id="selectFileBtn" class="px-6 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600">Select Image</button></div></div></div></template>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
        setupInteractiveTool({ toolId: 'watermark-image', title: 'Watermark Image' });

        document.querySelectorAll('.accordion-btn').forEach(b => {
            b.addEventListener('click', () => b.closest('.accordion').classList.toggle('active'));
        });
    });

    function setupInteractiveTool(config) {
        const toolRoot = document.getElementById('tool-root');
        toolRoot.innerHTML = document.getElementById('dropzone-template').innerHTML;
        const fileInput = toolRoot.querySelector('#fileInput'), selectBtn = toolRoot.querySelector('#selectFileBtn'), dropzone = toolRoot.querySelector('#dropzone');
        
        const handleFile = (file) => {
            if (!file || !file.type.startsWith('image/')) return;
            const reader = new FileReader();
            reader.onload = (e) => {
                const originalImage = new Image();
                originalImage.onload = () => {
                    toolRoot.innerHTML = `<div class="bg-white p-6 rounded-xl shadow-md border grid md:grid-cols-3 gap-6"><div id="options-panel" class="md:col-span-1 space-y-4"></div><div id="preview-panel" class="md:col-span-2 min-h-[300px] bg-gray-100 rounded-md flex items-center justify-center p-2"><canvas id="live-canvas"></canvas></div></div>`;
                    buildInteractiveOptions(toolRoot.querySelector('#options-panel'), originalImage, config);
                };
                originalImage.src = e.target.result;
            };
            reader.readAsDataURL(file);
        };
        
        selectBtn.onclick = () => fileInput.click();
        fileInput.onchange = (e) => handleFile(e.target.files[0]);
        dropzone.ondragover = (e) => { e.preventDefault(); dropzone.classList.add('dropzone-highlight'); };
        dropzone.ondragleave = () => dropzone.classList.remove('dropzone-highlight');
        dropzone.ondrop = (e) => { e.preventDefault(); dropzone.classList.remove('dropzone-highlight'); handleFile(e.dataTransfer.files[0]); };
    }

    function buildInteractiveOptions(panel, originalImage, config) {
        let optionsHtml = `<h3 class="text-xl font-bold border-b pb-2">${config.title}</h3>`;
        const canvas = document.getElementById('live-canvas'), ctx = canvas.getContext('2d');
        let state = { watermark: { text: 'EditIMG', size: 30, opacity: 70, color: '#ffffff', angle: 0 } };

        const redraw = () => {
            canvas.width = originalImage.width;
            canvas.height = originalImage.height;
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.drawImage(originalImage, 0, 0);
            
            const wm = state.watermark;
            ctx.save();
            ctx.translate(canvas.width / 2, canvas.height / 2);
            ctx.rotate(wm.angle * Math.PI / 180);
            ctx.font = `bold ${wm.size}px Arial`;
            ctx.fillStyle = `rgba(${parseInt(wm.color.slice(1,3),16)},${parseInt(wm.color.slice(3,5),16)},${parseInt(wm.color.slice(5,7),16)},${wm.opacity/100})`;
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(wm.text, 0, 0);
            ctx.restore();
        };

        optionsHtml += `<div><label for="w-text" class="block text-sm font-medium">Watermark Text</label><input type="text" id="w-text" value="EditIMG" class="w-full border-gray-300 rounded-md mt-1 p-2"></div><div><label for="w-color" class="block text-sm font-medium">Color</label><input type="color" id="w-color" value="#ffffff" class="w-full border-gray-300 rounded-md h-10 mt-1 p-1"></div><div><label for="w-size" class="block text-sm font-medium">Font Size: <span id="w-size-val">30</span></label><input type="range" id="w-size" min="10" max="200" value="30" class="w-full mt-1"></div><div><label for="w-opacity" class="block text-sm font-medium">Opacity: <span id="w-opacity-val">70</span>%</label><input type="range" id="w-opacity" min="0" max="100" value="70" class="w-full mt-1"></div><div><label for="w-angle" class="block text-sm font-medium">Rotation: <span id="w-angle-val">0</span>°</label><input type="range" id="w-angle" min="-45" max="45" value="0" class="w-full mt-1"></div>`;
        optionsHtml += `<div class="pt-4 border-t"><a id="download-btn" class="w-full block text-center px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600">Download Image</a></div><button id="reset-btn" class="w-full mt-2 px-6 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300">New Image</button>`;
        panel.innerHTML = optionsHtml;

        document.getElementById('reset-btn').onclick = () => setupInteractiveTool(config);
        
        ['w-text', 'w-color', 'w-size', 'w-opacity', 'w-angle'].forEach(id => {
            const inputEl = document.getElementById(id);
            inputEl.oninput = e => {
                const key = id.split('-')[1];
                state.watermark[key] = e.target.value;
                const valEl = document.getElementById(`${id}-val`);
                if (valEl) valEl.textContent = e.target.value;
                redraw();
            };
        });
        
        document.getElementById('download-btn').onclick = (e) => {
            e.currentTarget.href = canvas.toDataURL('image/png');
            e.currentTarget.download = `editimg-watermarked.png`;
        };

        redraw();
    }
  </script>
</body>
</html>