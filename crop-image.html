<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crop Image Online - EditIMG</title>
    <meta name="description" content="Crop your JPG, PNG, and GIF images for free. Select a rectangular area to trim your image online. Fast, private, and easy to use.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .dropzone-highlight { border-color: #10b981; background-color: rgba(16, 185, 129, 0.05); }
        .cropper-view-box, .cropper-face { border-radius: 0.5rem; }
        .cropper-line, .cropper-point { background-color: #10b981; }
        .accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out; }
        .accordion.active .accordion-content { max-height: 500px; }
        .accordion.active .accordion-toggle { transform: rotate(180deg); }
    </style>
</head>
<body class="bg-slate-50 text-gray-800">
    <div class="min-h-screen flex flex-col">
        <header class="bg-white/80 shadow-sm sticky top-0 z-50 backdrop-blur-lg">
            <div class="container mx-auto px-4">
                <div class="flex justify-between items-center py-4">
                    <a href="index.html" class="flex items-center space-x-3">
                        <i class="fas fa-images text-green-500 text-3xl"></i>
                        <h1 class="text-2xl md:text-3xl font-bold text-gray-800">EditIMG</h1>
                    </a>
                    <a href="index.html" class="text-gray-600 hover:text-green-500 font-medium">
                        <i class="fas fa-arrow-left mr-2"></i>Back to All Tools
                    </a>
                </div>
            </div>
        </header>

        <main class="flex-grow container mx-auto px-4 py-8">
            <div class="max-w-5xl mx-auto">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold mb-4">Image Crop Tool</h2>
                    <p class="text-gray-600 max-w-2xl mx-auto">Select a portion of your image and remove the rest. Perfect for framing and composition.</p>
                </div>
                
                <div id="tool-root"></div>

                <section class="mt-16 bg-white p-8 rounded-2xl shadow-md border">
                    <h3 class="text-2xl font-bold text-center mb-8">How to Crop Your Image</h3>
                    <ol class="list-decimal list-inside space-y-4 max-w-2xl mx-auto text-gray-700">
                        <li><strong>Upload Your Image:</strong> Drop an image file into the upload area or click to select one.</li>
                        <li><strong>Adjust the Crop Box:</strong> A cropping frame will appear over your image. Click and drag the edges or corners of the frame to adjust the crop area. You can also move the entire frame.</li>
                        <li><strong>Crop the Image:</strong> Once you have selected the area you want to keep, click the "Crop Image" button in the options panel.</li>
                        <li><strong>Download:</strong> The image will be cropped to the selected area. Click the "Download Image" button to save your new image.</li>
                    </ol>
                </section>

                <section class="pt-16 max-w-4xl mx-auto">
                    <h2 class="text-3xl font-bold text-center mb-8">Cropping FAQ</h2>
                    <div class="space-y-4 bg-white p-8 rounded-2xl shadow-lg border">
                        <div class="accordion border-b pb-4">
                            <button class="w-full flex justify-between items-center text-left font-semibold py-2 accordion-btn">
                                <span>Can I crop to a specific aspect ratio?</span>
                                <i class="fas fa-chevron-down accordion-toggle text-green-500"></i>
                            </button>
                            <div class="accordion-content mt-2 text-gray-600">
                                <p>Our current simple cropper allows for freeform cropping. For specific aspect ratios (like 16:9 or 1:1 square), we recommend resizing your cropped image afterward or using a more advanced photo editor. We plan to add aspect ratio locks in a future update!</p>
                            </div>
                        </div>
                        <div class="accordion">
                            <button class="w-full flex justify-between items-center text-left font-semibold py-2 accordion-btn">
                                <span>Does cropping reduce image quality?</span>
                                <i class="fas fa-chevron-down accordion-toggle text-green-500"></i>
                            </button>
                            <div class="accordion-content mt-2 text-gray-600">
                                <p>Cropping itself does not reduce the quality of the selected area. However, the final image will have smaller dimensions (fewer pixels) than the original. The quality of the pixels you keep remains the same.</p>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </main>

        <footer class="bg-white py-6 border-t border-gray-200 mt-20">
            <div class="container mx-auto px-4 text-center">
                <p class="text-gray-600">Â© 2025 EditIMG. All rights reserved.</p>
            </div>
        </footer>
    </div>

    <template id="dropzone-template"><div class="max-w-xl mx-auto"><div id="dropzone" class="border-2 border-dashed border-gray-300 rounded-xl p-8 text-center cursor-pointer hover:border-green-500 hover:bg-green-50"><div class="flex flex-col items-center justify-center space-y-4"><i class="fas fa-cloud-upload-alt text-4xl text-green-500"></i><h3 class="text-xl font-semibold">Drop your image here</h3><p class="text-gray-500">or click to select a file</p><input type="file" id="fileInput" class="hidden" accept="image/*"><button id="selectFileBtn" class="px-6 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600">Select Image</button></div></div></div></template>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            setupSimpleImageTool({ toolId: 'crop-image', title: 'Image Crop' });

            document.querySelectorAll('.accordion-btn').forEach(b => {
                b.addEventListener('click', () => b.closest('.accordion').classList.toggle('active'));
            });
        });

        function setupSimpleImageTool(config) {
            const toolRoot = document.getElementById('tool-root');
            toolRoot.innerHTML = document.getElementById('dropzone-template').innerHTML;
            const fileInput = toolRoot.querySelector('#fileInput'), selectBtn = toolRoot.querySelector('#selectFileBtn'), dropzone = toolRoot.querySelector('#dropzone');
            let cropper = null;

            const handleFile = (file) => {
                if (!file || !file.type.startsWith('image/')) return;
                const reader = new FileReader();
                reader.onload = (e) => {
                    const imageUrl = e.target.result;
                    toolRoot.innerHTML = `<div class="bg-white p-6 rounded-xl shadow-md border grid md:grid-cols-3 gap-6"><div id="options-panel" class="md:col-span-1 space-y-4"></div><div id="preview-panel" class="md:col-span-2 min-h-[300px] bg-gray-100 rounded-md flex items-center justify-center p-2"><img id="image-preview" src="${imageUrl}" class="max-w-full max-h-[500px]"></div></div>`;
                    buildSimpleOptions(toolRoot.querySelector('#options-panel'), config);
                };
                reader.readAsDataURL(file);
            };

            selectBtn.onclick = () => fileInput.click();
            fileInput.onchange = (e) => handleFile(e.target.files[0]);
            dropzone.ondragover = (e) => { e.preventDefault(); dropzone.classList.add('dropzone-highlight'); };
            dropzone.ondragleave = () => dropzone.classList.remove('dropzone-highlight');
            dropzone.ondrop = (e) => { e.preventDefault(); dropzone.classList.remove('dropzone-highlight'); handleFile(e.dataTransfer.files[0]); };

            const buildSimpleOptions = (panel, config) => {
                let optionsHtml = `<h3 class="text-xl font-bold border-b pb-2">${config.title}</h3>`;
                optionsHtml += `<div id="result-info" class="text-sm pt-4 border-t"></div><button id="process-btn" class="w-full px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600">Crop Image</button><button id="reset-btn" class="w-full mt-2 px-6 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300">New Image</button>`;
                panel.innerHTML = optionsHtml;
                attachSimpleListeners(config);
            };

            const attachSimpleListeners = (config) => {
                const img = document.getElementById('image-preview'), processBtn = document.getElementById('process-btn'), resetBtn = document.getElementById('reset-btn'), resultInfo = document.getElementById('result-info');
                resetBtn.onclick = () => setupSimpleImageTool(config);
                
                cropper = new Cropper(img, { viewMode: 1, background: false, autoCropArea: 0.8 });
                
                processBtn.onclick = () => {
                    resultInfo.innerHTML = `<div class="text-center"><i class="fas fa-spinner fa-spin text-green-500"></i><p class="text-sm mt-1">Processing...</p></div>`;
                    processBtn.disabled = true;
                    
                    const croppedCanvas = cropper.getCroppedCanvas();
                    const downloadUrl = croppedCanvas.toDataURL('image/png');
                    const newImg = new Image();
                    newImg.src = downloadUrl;
                    newImg.onload = () => {
                         resultInfo.innerHTML = `<p class="mb-2">New Dimensions: ${newImg.width} x ${newImg.height}px</p><a href="${downloadUrl}" download="editimg-cropped.png" class="mt-2 block w-full text-center px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600">Download Cropped Image</a>`;
                         processBtn.disabled = false;
                         cropper.replace(downloadUrl);
                    }
                };
            };
        }
    </script>
</body>
</html>